---
toc: true
title: 10-Java对象的内存布局
date: 2022-2-11
tags: [《深入拆解Java虚拟机》] 
categories:
- JVM
---

#### 压缩指针
- 在Java虚拟机中，每一个Java对象都有一个对象头（object header），对象头由**标记字段**和**类型指针**构成，其中标记字段用以存储Java虚拟机有关该对象的运行数据（例如哈希码，GC信息和锁信息），类型指针用以指向该对象的类
- 64位Java虚拟机中，对象头的标记字段占64位，类型指针同样占64位，即每一个Java对象在内存中的开销至少是（64+64）/8=16字节
- 64位Java虚拟机引入了压缩指针，将堆中原本64位的Java对象指针压缩成32位的，对象头中的类型指针也被压缩成32位，此时每一个Java对象在内存中的开销至少是（64+32）/8=12字节
- 压缩指针要求Java虚拟机堆中对象的起始地址要对齐至8的倍数
#### 字段重排列
- 字段重排列：Java虚拟机重新分配字段的先后顺序，以达到内存对齐的目的


























